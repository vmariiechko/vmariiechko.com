@layer base {
  html { color-scheme: light dark; }
  body {
    font-family: var(--ff-sans);
    font-size: var(--fs-body);
    line-height: var(--lh-body);
    color: var(--text);
    background: var(--bg);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--ff-head);
    color: var(--text);
    letter-spacing: -0.005em;
  }
  h1, h2 { font-weight: 700; }
  h3, h4 { font-weight: 650; }
  h5, h6 { font-weight: 600; }
  h1 { font-size: var(--fs-h1); line-height: var(--lh-tight); margin-block: 1.2em 0.5em; }
  h2 { font-size: var(--fs-h2); line-height: var(--lh-head); margin-block: 1.2em 0.6em; }
  h3 { font-size: var(--fs-h3); line-height: 1.25; margin-block: 1em 0.5em; }
  h4 { font-size: var(--fs-h4); line-height: 1.28; margin-block: 1em 0.5em; }
  h5 { font-size: var(--fs-h5); line-height: 1.32; margin-block: 0.8em 0.4em; }
  h6 { font-size: var(--fs-h6); line-height: 1.35; margin-block: 0.8em 0.4em; text-transform: none; }

  p { margin-block: 0 var(--space-para); }
  p + p { margin-block-start: var(--space-para); }
  p img {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  a {
    color: var(--link);
    text-decoration-line: underline;
    text-decoration-thickness: 1.25px;
    text-underline-offset: 0.18em;
  }
  a:visited { color: var(--link); }
  a:hover { text-decoration-thickness: 2px; text-decoration-style: solid; }

  /* Apply our site's theme to all inline code blocks */
  code, kbd, samp {
    font-family: var(--ff-mono);
    font-size: var(--fs-code);
    background: var(--code-inline-bg);
    padding: 0.1em 0.3em;
    border-radius: 0.25rem;
    font-variant-ligatures: none;
    overflow-wrap:anywhere;
  }

  /* Keep Prismâ€™s multi-line code rules; only set the font */
  pre code {
    font-family: var(--ff-mono);
    font-size: var(--fs-code);
    line-height: 1.55;
  }

  /*
  The background and border are now applied to pre[class*="language-"]
  in components.css to ensure all code blocks (including those without a
  language that get a default class from Prism) are themed consistently.
  */
  pre {
    position: relative;
    padding: 1rem 1.25rem;
    border-radius: 0.5rem;
    overflow: auto;
    margin-block: 1.2rem;
  }

  blockquote {
    margin-block: 1.2em;
    padding-inline: 1em;
    border-left: 0.25em solid var(--accent);
    color: var(--muted);
  }

  figcaption, .caption {
    font-size: var(--fs-small);
    color: var(--muted);
    margin-top: 0.5rem;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--fs-small);
  }
  th, td { border-bottom: 1px solid var(--border); padding: 0.6rem 0.4rem; }
  th { text-align: left; font-weight: 600; }

  /* Focus styles */
  :focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }

  /* Exception: no outline for heading anchors */
  .heading-anchor:focus-visible {
    outline: none;
    box-shadow: none;
  }

  /* No outline on headings when navigated via anchor link */
  h2[tabindex="-1"]:focus,
  h3[tabindex="-1"]:focus,
  h4[tabindex="-1"]:focus,
  h2[tabindex="-1"]:focus-visible,
  h3[tabindex="-1"]:focus-visible,
  h4[tabindex="-1"]:focus-visible {
    outline: none;
  }

  /* Numeric alignment to keep columns and timestamps from wiggling */
  table, code, pre, kbd, samp { font-variant-numeric: tabular-nums; }

  @media print {
    :root { --bg:#fff; --surface:#fff; --text:#000; --border:#d1d5db; }
    body { background:#fff !important; color:#000 !important; }
    a { color:#000; text-decoration: underline; }
    pre { background:#fff; border-color:#d1d5db; }
  }
}
